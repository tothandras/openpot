/**
*	@author Andras Toth <andras.toth93@gmail.com>
*	@url https://github.com/tothandras/openpot
*	@license MIT
*/
angular.module("config",[]).constant("RELEASE",!0),angular.module("template",[]).run(["$templateCache",function(e){e.put("home.tpl.html",'<div class="home" layout="row" layout-align="center center">\n    <div class="search" layout="row" layout-margin>\n        <md-autocomplete flex="80" flex-order="1"\n                         md-no-cache="false"\n                         md-selected-item="home.selectedItem"\n                         md-search-text="home.searchText"\n                         md-items="item in home.querySearchItems"\n                         md-item-text="item">\n            <span md-highlight-text="user.searchText">{{item}}</span>\n        </md-autocomplete>\n        <md-button class="md-raised md-primary" flex="20" flex-order="2"\n            ng-click="home.search()">\n            Keresés\n        </md-button>\n    </div>\n    <img src="image/home.jpg" alt="background" class="responsive-image">\n</div>\n'),e.put("login.tpl.html",'<md-dialog class="login">\n    <md-content>\n        <h3>Belépés</h3>\n        <form name="loginForm" novalidate>\n            <md-input-container>\n                <label for="email">Email</label>\n                <input id="email" type="email" name="email" ng-model="dialog.email" required>\n                <div ng-messages="loginForm.email.$error" ng-show="loginForm.email.$dirty">\n                    <div ng-message="required">Kötelező megadni!</div>\n                </div>\n            </md-input-container>\n            <md-input-container>\n                <label for="password">Jelszó</label>\n                <input id="password" type="password" name="password" ng-model="dialog.password" minlength="8" required>\n                <div ng-messages="loginForm.password.$error" ng-show="loginForm.password.$dirty">\n                    <div ng-message="required">Kötelező megadni!</div>\n                    <div ng-message="minlength">Túl rövid!</div>\n                </div>\n            </md-input-container>\n        </form>\n        <div class="error-container">\n            <span class="error" ng-show="dialog.error">Helytelen felhasználónév vagy jelszó.</span>\n        </div>\n    </md-content>\n    <div class="md-actions">\n        <md-button class="md-primary" ng-click="dialog.login()" ng-disabled="loginForm.$invalid">OK</md-button>\n        <md-button ng-click="dialog.closeDialog()">Mégse</md-button>\n    </div>\n</md-dialog>\n'),e.put("menu.tpl.html",'<div class="menu">\n    <md-sidenav md-component-id="left" class="md-sidenav-left">\n        <md-toolbar class="md-default-theme">\n        </md-toolbar>\n        <md-content class="md-padding" layout="column">\n            <md-button ng-repeat="item in ::menu.items" ui-sref="{{ item.sref }}">\n                {{ item.caption }}\n            </md-button>\n        </md-content>\n    </md-sidenav>\n</div>\n'),e.put("pots.tpl.html",'<div class="pots">\n    <div layout="row" class="row">\n        <div flex="35" class="info">\n            <ui-gmap-google-map options="pots.map.options" center=\'pots.map.center\' zoom=\'pots.map.zoom\' pan="true">\n                <ui-gmap-markers models="pots.markers" coords="\'self\'" icon="\'icon\'">\n                </ui-gmap-markers>\n            </ui-gmap-google-map>\n        </div>\n        <div ng-switch="pots.pots.length" flex="65" class="list">\n            <div ng-switch-when="0" class="no-pots" layout="row" layout-align="center center">\n                <h1>\n                    Jelenleg egy szaftos fazék sincs a környéken.\n                    <br/>\n                    <span>Nézz vissza később!</span>\n                </h1>\n            </div>\n            <div ng-switch-default>\n                <md-content class="cards" layout="row" layout-wrap layout-padding>\n                    <form name="search" novalidate flex="100">\n                        <md-input-container>\n                            <label for="name">Keresés</label>\n                            <input id="name" type="text" ng-model="pots.search"/>\n                        </md-input-container>\n                    </form>\n                    <div class="flip" layout-padding\n                         ng-repeat="pot in pots.pots | filter:pots.search track by pot.id"\n                         flex="50">\n                        <div class="card"\n                             ng-class="{\'flipped\': pot.isFlipped}"\n                             ng-click="pot.isFlipped = !pot.isFlipped && !!pots.user.email">\n                            <div class="face front">\n                                <op-pot-bg ng-mouseenter="pots.mouseEnter(pot.id)"\n                                           ng-mouseleave="pots.mouseLeave(pot.id)"\n                                           pot="pot">\n                                </op-pot-bg>\n                            </div>\n                            <div class="face back">\n                                <md-card layout="column" layout-align="center center">\n                                    <md-content>\n                                        <md-button class="md-primary" ng-click="pots.reserve(pot.id)">Jelentkezés</md-button>\n                                    </md-content>\n                                </md-card>\n                            </div>\n                        </div>\n                    </div>\n                </md-content>\n            </div>\n        </div>\n    </div>\n</div>\n'),e.put("register.tpl.html",'<md-dialog class="register">\n    <md-content>\n        <h3>Regisztráció</h3>\n        <form name="registerForm" novalidate>\n            <md-input-container>\n                <label for="email">Email</label>\n                <input id="email" type="email" name="email" ng-model="dialog.email" required>\n                <div ng-messages="registerForm.email.$error" ng-show="registerForm.email.$dirty">\n                    <div ng-message="required">Kötelező megadni!</div>\n                </div>\n            </md-input-container>\n            <md-input-container>\n                <label for="password">Jelszó</label>\n                <input id="password" type="password" name="password" ng-model="dialog.password" minlength="8" required>\n                <div ng-messages="registerForm.password.$error" ng-show="registerForm.password.$dirty">\n                    <div ng-message="required">Kötelező megadni!</div>\n                    <div ng-message="minlength">Túl rövid!</div>\n                </div>\n            </md-input-container>\n            <md-input-container>\n                <label for="firstName">Keresztnév</label>\n                <input id="firstName" type="text" name="firstName" ng-model="dialog.firstName" required>\n                <div ng-messages="registerForm.firstName.$error" ng-show="registerForm.firstName.$dirty">\n                    <div ng-message="required">Kötelező megadni!</div>\n                </div>\n            </md-input-container>\n            <md-input-container>\n                <label for="lastName">Vezetéknév</label>\n                <input id="lastName" type="text" name="lastName" ng-model="dialog.lastName" required>\n                <div ng-messages="registerForm.lastName.$error" ng-show="registerForm.lastName.$dirty">\n                    <div ng-message="required">Kötelező megadni!</div>\n                </div>\n            </md-input-container>\n        </form>\n        <div class="error-container">\n            <span class="error" ng-show="dialog.error">Ez az email cím már használatban van.</span>\n        </div>\n    </md-content>\n    <div class="md-actions">\n        <md-button class="md-primary" ng-click="dialog.register()" ng-disabled="registerForm.$invalid">OK</md-button>\n        <md-button ng-click="dialog.closeDialog()">Mégse</md-button>\n    </div>\n</md-dialog>\n'),e.put("toolbar.tpl.html",'<div class="toolbar">\n    <md-toolbar class="md-default-theme" layout="row">\n        <h1 class="md-toolbar-tools">\n            <i class="fa fa-bars" ng-click="toolbar.toggleMenu()"/>\n            <a ui-sref="home">\n                <p>OpenPot</p>\n            </a>\n        </h1>\n        <h1 class="md-toolbar-tools" layout="row" layout-align="end center">\n            <p ng-if="!toolbar.user.email">\n                <span class="link" ng-click="toolbar.openRegistrationDialog($event)">Regisztráció</span>\n                <span class="link" ng-click="toolbar.openLoginDialog($event)">Belépés</span>\n            </p>\n\n            <p ng-if="!!toolbar.user.email">\n                <span>{{toolbar.user.firstName}}</span>\n                <i class="fa fa-caret-down" ng-class="{\'fa-rotate-180\': toolbar.dropdown}"\n                   ng-click="toolbar.toggleDropdown()"></i>\n            </p>\n        </h1>\n    </md-toolbar>\n    <div ng-show="toolbar.dropdown" class="dropdown md-whiteframe-z1">\n        <ul>\n            <li ng-click="toolbar.goToUser()">Felhasználó</li>\n            <li ng-click="toolbar.newPot()">Új hirdetés</li>\n            <li ng-click="toolbar.goToReservations()">Jelentkezések</li>\n            <li ng-click="toolbar.logout()">Kijelentkezés</li>\n        </ul>\n    </div>\n</div>\n'),e.put("pot-bg.tpl.html",'<md-card class="pot bg" ng-class="{\'md-whiteframe-z2\': pot.mouse}" ng-mouseenter="pot.mouse = true" ng-mouseleave="pot.mouse = false">\n    <div class="image" ng-style="{\'background-image\':\'url({{pot.S3.cdn + pot.pot.id}})\'}"></div>\n    <div class="text">\n        <h2>{{pot.pot.name}}</h2>\n        <p>\n            {{pot.pot.description}} - {{pot.pot.address}}\n        </p>\n    </div>\n    <div class="img-container">\n        <a ng-href="{{\'user/\' + pot.user.id}}">\n            <img ng-src="{{::pot.user.image}}" alt="" class="circle responsive-image"/>\n        </a>\n    </div>\n</md-card>\n'),e.put("pot-sm.tpl.html",'<md-card class="pot sm">\n    <h2 ng-click="pot.toggleDescription()">{{pot.pot.name}}</h2>\n    <section class="details" ng-show="pot.showDescription">\n        <p>{{pot.pot.description}}</p>\n        <div class="img-container">\n            <img ng-src="{{pot.gravatar(pot.user.email)}}" alt="" class="circle responsive-image"/>\n        </div>\n    </section>\n</md-card>\n\n'),e.put("user.tpl.html",'<div class="user">\n    <div layout="row" class="row">\n        <div flex="25" class="info">\n            <div class="img-container">\n                <img ng-src="{{::user.data.image}}" alt="" class="circle responsive-image"/>\n            </div>\n            <h2 class="firstName">{{::user.data.firstName}}</h2>\n\n            <h3 class="lastName">{{::user.data.lastName}}</h3>\n\n            <div ng-switch on="user.data.stars">\n                <p ng-switch-when="0">\n                    <i class="fa fa-star-o"></i>\n                </p>\n\n                <p ng-switch-default>\n                    <i class="fa fa-star" ng-repeat="star in app.range(user.data.stars)"></i>\n                </p>\n            </div>\n        </div>\n        <div flex class="subview" ui-view></div>\n    </div>\n</div>\n'),e.put("user.newpot.tpl.html",'<div class="new-pot">\n    <h1>\n        <span>Új hírdetés</span>\n    </h1>\n    <section class="form">\n        <div layout="row" class="row">\n            <md-content flex="60">\n                <form name="newpotForm" novalidate ng-submit="$event.preventDefault()">\n                    <md-input-container>\n                        <label for="newName">Név</label>\n                        <input id="newName" type="text" name="newName" ng-model="user.newName" required>\n\n                        <div ng-messages="newpotForm.newName.$error" ng-show="newpotForm.newName.$dirty">\n                            <div ng-message="required">Kötelező megadni!</div>\n                        </div>\n                    </md-input-container>\n                    <md-input-container>\n                        <label for="newDescription">Leírás</label>\n                        <input id="newDescription" type="text" name="newDescription" ng-model="user.newDescription"\n                               minlength="20" required>\n\n                        <div ng-messages="newpotForm.newDescription.$error" ng-show="newpotForm.newDescription.$dirty">\n                            <div ng-message="required">Kötelező megadni!</div>\n                            <div ng-message="minlength">Túl rövid!</div>\n                        </div>\n                    </md-input-container>\n                    <md-input-container>\n                        <label for="newAddress">Cím</label>\n                        <input id="newAddress" type="text" name="newAddress" ng-model="user.newAddress" required>\n\n                        <div ng-messages="newpotForm.newAddress.$error" ng-show="newpotForm.newAddress.$dirty">\n                            <div ng-message="required">Kötelező megadni!</div>\n                        </div>\n                    </md-input-container>\n                    <md-input-container>\n                        <label for="newAmount">Adagok száma</label>\n                        <input id="newAmount" type="number" name="newAmount" ng-model="user.newAmount" min="0" step="1" pattern="\\d*" required>\n\n                        <div ng-messages="newpotForm.newAmount.$error" ng-show="newpotForm.newAmount.$dirty">\n                            <div ng-message="required">Kötelező megadni!</div>\n                            <div ng-message="pattern">Csak egész szám lehet!</div>\n                        </div>\n                    </md-input-container>\n                    <!--<md-chips ng-model="ctrl.selectedVegetables" md-autocomplete-snap md-require-match>-->\n                    <!--<md-autocomplete-->\n                    <!--md-selected-item="ctrl.selectedItem"-->\n                    <!--md-search-text="ctrl.searchText"-->\n                    <!--md-items="item in ctrl.querySearch(ctrl.searchText)"-->\n                    <!--md-item-text="item.name"-->\n                    <!--placeholder="Search for a vegetable">-->\n                    <!--<span md-highlight-text="ctrl.searchText">{{item.name}}</span>-->\n                    <!--</md-autocomplete>-->\n                    <!--<md-chip>{{$chip.name}}</md-chip>-->\n                    <!--</md-chips>-->\n                </form>\n                <div class="error-container">\n                    <span class="error" ng-show="user.error">Helytelen adatok.</span>\n                </div>\n            </md-content>\n            <div class="drop-box" flex ngf-drop ngf-select ng-model="user.newImage"\n                 ngf-change="user.fileDropped($files, $event, $rejectedFiles)"\n                 ngf-drag-over-class="dragover"\n                 ngf-accept="\'image/*\'"\n                 ngf-max-size=\'100000000\'>\n                <i class="fa fa-camera fa-2x"></i>\n\n                <div class="image-container">\n                    <img ngf-src="user.newImage[0]" ngf-accept="\'image/*\'">\n                </div>\n            </div>\n        </div>\n\n        <div class="md-actions">\n            <md-button class="md-primary" ng-click="user.newPot()" ng-disabled="newpotForm.$invalid || !user.newImage">\n                OK\n            </md-button>\n        </div>\n    </section>\n\n    <md-button class="md-fab" aria-label="Go back" ng-click="user.goToList()">\n        <i class="fa fa-minus"></i>\n    </md-button>\n</div>\n'),e.put("user.list.tpl.html",'<div class="list">\n    <div layout="row" layout-wrap>\n        <div ng-repeat="pot in user.pots track by pot.id"\n             flex="50"\n             layout-padding>\n            <md-card class="pot">\n                <div class="image"\n                     ng-style="{\'background-image\':\'url({{user.S3.cdn + pot.id}})\'}"></div>\n                <div class="text">\n                    <h2>{{pot.name}}</h2>\n                    <p>\n                        {{pot.description}} - {{pot.address}}\n                    </p>\n                </div>\n                <!--<md-switch class="hide-button"-->\n                           <!--ng-if="user.myUser"-->\n                           <!--ng-model="pot.hidden"-->\n                           <!--aria-label="Hide pot">-->\n                <!--</md-switch>-->\n                <md-button class="delete-button"\n                           ng-click="user.deletePot(pot.id, $event)"\n                           md-no-ink="true"\n                           ng-if="user.myUser">\n                    <i class="fa fa-times"></i>\n                </md-button>\n            </md-card>\n        </div>\n    </div>\n    <md-button class="md-fab"\n               ng-click="user.goToNewpot()"\n               ng-show="user.myUser"\n               aria-label="">\n        <i class="fa fa-plus"></i>\n    </md-button>\n</div>\n'),e.put("user.reservations.tpl.html",'<div class="reservations">\n    <md-content>\n        <md-list>\n            <md-divider></md-divider>\n            <md-list-item class="md-3-line" ng-repeat="pot in user.reservations track by pot.id">\n                <img ng-src="{{app.S3.cdn + pot.id}}" class="md-avatar" alt="{{pot.id}}"/>\n\n                <div class="md-list-item-text">\n                    <h3>{{pot.name}}</h3>\n                    <h4>{{pot.description}}</h4>\n\n                    <p>{{pot.address}}</p>\n                </div>\n                <div class="rate">\n                    <md-button class="md-icon-button"\n                               md-no-ink="true"\n                               ng-repeat="star in [1, 2, 3, 4, 5]"\n                               ng-init="pot.newRating = pot.rating"\n                               ng-mouseenter="pot.newRating = star"\n                               ng-mouseleave="pot.newRating = pot.rating"\n                               ng-click="user.rateReservation(pot.id, star)"\n                               aria-label="rate">\n                        <i ng-if="pot.newRating < star" class="fa fa-star-o"></i>\n                        <i ng-if="pot.newRating >= star" class="fa fa-star"></i>\n                    </md-button>\n                </div>\n                <md-button class="md-icon-button"\n                           md-no-ink="true"\n                           ng-click="user.deleteReservation(pot.id, $event)"\n                           aria-label="delete">\n                    <i class="fa fa-times"></i>\n                </md-button>\n            </md-list-item>\n            <md-divider></md-divider>\n        </md-list>\n    </md-content>\n</div>\n')}]);var op;!function(){"use strict";angular.module("op",["ngMaterial","ngMessages","template","config","op.common","op.home","op.pots","op.toolbar","op.users","ui.router"])}(op||(op={}));var op;!function(e){var t;!function(){"use strict";angular.module("op.common",["ngMaterial","LocalStorageModule","ngFileUpload"])}(t=e.toolbar||(e.toolbar={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";angular.module("op.home",["ui.router","uiGmapgoogle-maps"])}(t=e.home||(e.home={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";angular.module("op.login",["op.common","ui.router"])}(t=e.login||(e.login={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";angular.module("op.menu",["ui.router"])}(t=e.menu||(e.menu={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";angular.module("op.pots",["op.common","ui.router","uiGmapgoogle-maps"])}(t=e.pots||(e.pots={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";angular.module("op.register",["op.common","ui.router"])}(t=e.register||(e.register={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";angular.module("op.toolbar",["ngMaterial","op.menu","op.login","op.register","ui.router"])}(t=e.toolbar||(e.toolbar={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";angular.module("op.users",["op.common","ui.router","angular-md5"])}(t=e.users||(e.users={}))}(op||(op={}));var op;!function(){"use strict";function e(e,t,n,o,i){e.html5Mode(!0),t.otherwise("/"),n.debugInfoEnabled(!i),o.debugEnabled(!i)}e.$inject=["$locationProvider","$urlRouterProvider","$compileProvider","$logProvider","RELEASE"],angular.module("op").config(e)}(op||(op={}));var op;!function(){"use strict";var e=function(){function e(e,t,n){var o=this;this.S3=n,this.name="App Controller",this.titlePrefix="OpenPot",this.title="OpenPot",e.$on("$stateChangeSuccess",function(e,t){angular.isDefined(t.data.title)&&(o.title=o.titlePrefix+" | "+t.data.title)})}return e.$inject=["$scope","$log","S3"],e.$inject=["$scope","$log","S3"],e.prototype.range=function(e){return new Array(e)},e}();angular.module("op").controller("AppController",e)}(op||(op={}));var op;!function(e){var t;!function(){"use strict";var e="/api",t="/auth";angular.module("op.common").constant("API_URL",e).constant("AUTH_URL",t)}(t=e.common||(e.common={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";function e(e){e.configure({v:"3.17",libraries:"places",region:"HU"})}e.$inject=["uiGmapGoogleMapApiProvider"],angular.module("op.home").config(e)}(t=e.home||(e.home={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";var e=function(){function e(e,t,n,o){var i=this;this.$state=n,this.uiGmapGoogleMapApi=o,this.name="Home Controller",this.querySearchItems=[],this.uiGmapGoogleMapApi.then(function(e){var n=new e.places.AutocompleteService;t.$watch("home.searchText",function(){angular.isDefined(i.searchText)&&""!==i.searchText&&n.getPlacePredictions({input:i.searchText,language:"hu-HU",types:["(cities)"],componentRestrictions:{country:"hu"}},function(e,t){"OK"===t&&(i.querySearchItems=e.map(function(e){return e.terms[0].value}))})})})}return e.$inject=["$log","$scope","$state","uiGmapGoogleMapApi"],e.$inject=["$log","$scope","$state","uiGmapGoogleMapApi"],e.prototype.search=function(){this.$state.transitionTo("pots",{search:this.searchText})},e}();angular.module("op.home").controller("HomeController",e)}(t=e.home||(e.home={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";function e(e){e.state("home",{url:"/",templateUrl:"home.tpl.html",controller:"HomeController",controllerAs:"home",data:{onMenu:!0,caption:"Főoldal",icon:null}})}e.$inject=["$stateProvider"],angular.module("op.home").config(e)}(t=e.home||(e.home={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";var e=function(){function e(e,t,n,o,i){this.AuthService=e,this.SessionService=t,this.$state=n,this.LoginDialogService=o,this.$log=i,this.name="Login Controller",i.debug(this.name)}return e.$inject=["AuthService","SessionService","$state","LoginDialogService","$log"],e.$inject=["AuthService","SessionService","$state","LoginDialogService","$log"],e.prototype.login=function(){var e=this;this.error=null,this.AuthService.login(this.email,this.password).then(function(t){e.$log.debug(t),e.LoginDialogService.closeDialog()},function(t){e.error=t})},e.prototype.logout=function(){this.SessionService.loggedIn()&&(this.AuthService.logout(),this.LoginDialogService.closeDialog(),this.$state.go("home"))},e.prototype.closeDialog=function(){this.LoginDialogService.closeDialog()},e}();angular.module("op.login").controller("LoginController",e)}(t=e.login||(e.login={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";var e=function(){function e(e,t){this.$log=e,this.$mdDialog=t}return e.$inject=["$log","$mdDialog"],e.$inject=["$log","$mdDialog"],e.prototype.showDialog=function(e){return this.$mdDialog.show({parent:angular.element(document.body),targetEvent:e,templateUrl:"login.tpl.html",controller:"LoginController as dialog"})},e.prototype.closeDialog=function(){return this.$mdDialog.hide()},e}();angular.module("op.login").service("LoginDialogService",e)}(t=e.login||(e.login={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";var e=function(){function e(e,t,n){var o=this;this.$mdSidenav=e,this.name="Menu Controller",this.items=n.getMenuItems(),t.$on("$stateChangeStart",function(){o.close()})}return e.$inject=["$mdSidenav","$rootScope","MenuService"],e.$inject=["$mdSidenav","$rootScope","MenuService"],e.prototype.close=function(){this.$mdSidenav("left").close()},e}();angular.module("op.menu").controller("MenuController",e)}(t=e.menu||(e.menu={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";var e=function(){function e(){this.restrict="E",this.scope={},this.controller="MenuController",this.controllerAs="menu",this.bindToController=!0,this.templateUrl="menu.tpl.html",this.transclude=!1,this.replace=!0}return e.instance=function(){return new e},e}();angular.module("op.menu").directive("opMenu",e.instance)}(t=e.menu||(e.menu={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";var e=function(){function e(e,t){this.$log=e,this.$state=t}return e.$inject=["$log","$state"],e.$inject=["$log","$state"],e.prototype.getMenuItems=function(){for(var e=[],t=this.$state.get(),n=1;n<t.length;n++){var o=t[n],i=o.data;i.onMenu&&e.push({caption:null!=i?i.caption:o.name,sref:o.name,icon:null!=i?i.icon:null})}return this.$log.debug(e),e},e}();angular.module("op.menu").service("MenuService",e)}(t=e.menu||(e.menu={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";var t=function(){function t(e,t,n,o,i,r){var s=this;this.$log=e,this.APIService=n,this.name="Pots Controller",this.pots=[],this.markers=[],i.getUser().then(function(e){return s.user=e}),r.then(function(e){s.map={center:o.getLastLocation(),zoom:12,options:{disableDefaultUI:!0,zoomControl:!0,zoomControlOptions:{style:e.ZoomControlStyle.SMALL,position:e.ControlPosition.LEFT_BOTTOM},streetViewControl:!0}},o.getLocation().then(function(e){s.map.center=e})}),n.getPots().then(function(e){e=e.filter(function(e){return e.cook!=s.user.id}),t.search&&""!==t.search&&(e=e.filter(function(e){return e.address.indexOf(t.search)>-1}),o.geocode(t.search).then(function(e){s.map.center=e})),s.pots=e,s.pots.forEach(function(e){o.geocode(e.address).then(function(t){var n={id:e.id,latitude:t.latitude,longitude:t.longitude,title:e.name};s.markers.push(n)})})})}return t.$inject=["$log","$stateParams","APIService","LocationService","SessionService","uiGmapGoogleMapApi"],t.$inject=["$log","$stateParams","APIService","LocationService","SessionService","uiGmapGoogleMapApi"],t.prototype.mouseEnter=function(t){for(var n=0;n<this.markers.length;n++){var o=this.markers[n];o.id===t&&(this.map.center=new e.common.Location(o.latitude,o.longitude))}},t.prototype.reserve=function(e){var t=this;this.APIService.reservePot(e).then(function(e){t.$log.debug(e)},function(e){t.$log.debug(e)})},t}();angular.module("op.pots").controller("PotsController",t)}(t=e.pots||(e.pots={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";function e(e){e.state("pots",{url:"/pots?search",templateUrl:"pots.tpl.html",controller:"PotsController",controllerAs:"pots",data:{onMenu:!0,caption:"Böngészés",title:"Böngészés",icon:null}})}e.$inject=["$stateProvider"],angular.module("op.pots").config(e)}(t=e.pots||(e.pots={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";var t=function(){function t(e,t,n,o){this.$state=e,this.RegisterDialogService=t,this.AuthService=n,this.$log=o,this.name="Register Controller",o.debug(this.name)}return t.$inject=["$state","RegisterDialogService","AuthService","$log"],t.$inject=["$state","RegisterDialogService","AuthService","$log"],t.prototype.register=function(){var t=this;this.error=null;var n=new e.common.RegisterUser;n.email=this.email,n.password=this.password,n.firstName=this.firstName,n.lastName=this.lastName,this.AuthService.register(n).then(function(e){t.$log.debug(e),t.closeDialog()},function(e){t.error=e})},t.prototype.closeDialog=function(){this.RegisterDialogService.closeDialog()},t}();angular.module("op.register").controller("RegisterController",t)}(t=e.register||(e.register={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";var e=function(){function e(e,t){this.$log=e,this.$mdDialog=t}return e.$inject=["$log","$mdDialog"],e.$inject=["$log","$mdDialog"],e.prototype.showDialog=function(e){this.$mdDialog.show({parent:angular.element(document.body),targetEvent:e,templateUrl:"register.tpl.html",controller:"RegisterController as dialog"})},e.prototype.closeDialog=function(){this.$mdDialog.hide()},e}();angular.module("op.register").service("RegisterDialogService",e)}(t=e.register||(e.register={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";var e=function(){function e(e,t,n,o,i,r,s){var a=this;this.$log=e,this.$mdSidenav=n,this.$state=o,this.LoginDialogService=i,this.RegisterDialogService=r,this.SessionService=s,this.name="Toolbar Controller",this.dropdown=!1,s.getUser().then(function(e){a.user=e}),t.$on("$stateChangeStart",function(){a.dropdown=!1})}return e.$inject=["$log","$rootScope","$mdSidenav","$state","LoginDialogService","RegisterDialogService","SessionService"],e.$inject=["$log","$rootScope","$mdSidenav","$state","LoginDialogService","RegisterDialogService","SessionService"],e.prototype.toggleMenu=function(){this.$mdSidenav("left").toggle()},e.prototype.openRegistrationDialog=function(e){this.RegisterDialogService.showDialog(e)},e.prototype.openLoginDialog=function(e){this.LoginDialogService.showDialog(e)},e.prototype.goToUser=function(){this.$state.transitionTo("user.list")},e.prototype.newPot=function(){this.$state.transitionTo("user.newpot")},e.prototype.logout=function(){this.dropdown=!1,this.SessionService.unsetUser()},e.prototype.toggleDropdown=function(){this.dropdown=!this.dropdown},e.prototype.goToReservations=function(){this.$state.transitionTo("user.reservations")},e}();angular.module("op.toolbar").controller("ToolbarController",e)}(t=e.toolbar||(e.toolbar={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";var e=function(){function e(){this.restrict="E",this.scope={},this.controller="ToolbarController",this.controllerAs="toolbar",this.bindToController=!0,this.templateUrl="toolbar.tpl.html",this.transclude=!1,this.replace=!0}return e.instance=function(){return new e},e}();angular.module("op.toolbar").directive("opToolbar",e.instance)}(t=e.toolbar||(e.toolbar={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";function e(e,t,n){e.$on("$stateChangeSuccess",function(){t.ga&&t.ga("send","pageview",{page:n.path()})})}e.$inject=["$rootScope","$window","$location"],angular.module("op.common").run(e)}(t=e.common||(e.common={}))}(op||(op={}));var op;!function(e){var t;!function(t){"use strict";var n=function(){function n(e,t,n,o,i,r){this.$http=e,this.$q=t,this.$log=n,this.API_URL=o,this.Upload=i,this.S3=r}return n.$inject=["$http","$q","$log","API_URL","Upload","S3"],n.$inject=["$http","$q","$log","API_URL","Upload","S3"],n.prototype.getUserData=function(e){var n=this.$q.defer(),o={method:"GET",url:this.API_URL+"/user/"+e};return this.$http(o).success(function(e){var o=new t.User(e);n.resolve(o)}).error(function(e){return n.reject(e)}),n.promise},n.prototype.getPots=function(){var e=this.$q.defer(),n={method:"GET",url:this.API_URL+"/pot"};return this.$http(n).success(function(n){var o=[];angular.isArray(n)&&(n.forEach(function(e){var n=new t.Pot(e);o.push(n)}),e.resolve(o)),e.reject("Response is not an array")}).error(function(t){return e.reject(t)}),e.promise},n.prototype.getUserPots=function(e){var n=this.$q.defer(),o={method:"GET",url:this.API_URL+"/user/"+e+"/pot"};return this.$http(o).success(function(e){var o=[];angular.isArray(e)&&(e.forEach(function(e){var n=new t.Pot(e);o.push(n)}),n.resolve(o)),n.reject("Response is not an array")}).error(function(e){return n.reject(e)}),n.promise},n.prototype.getUserReservations=function(){var e=this.$q.defer(),n={method:"GET",url:this.API_URL+"/reservation"};return this.$http(n).success(function(n){var o=[];angular.isArray(n)&&(n.forEach(function(e){var n=new t.Pot(e);o.push(n)}),e.resolve(o)),e.reject("Response is not an array")}).error(function(t){return e.reject(t)
}),e.promise},n.prototype.createPot=function(e){var t=this,n=this.$q.defer(),o={method:"POST",url:this.API_URL+"/pot",data:e};return this.$http(o).success(function(o){var i=o;t.Upload.upload({url:t.S3.url,method:"POST",fields:{key:i,AWSAccessKeyId:t.S3.key,acl:t.S3.acl,policy:t.S3.policy,signature:t.S3.signature,"Content-Type":e.image.type,filename:i},file:e.image}).then(function(){n.resolve(o)},function(e){t.deletePot(o),n.reject(e)})}).error(function(e){return n.reject(e)}),n.promise},n.prototype.deletePot=function(e){var t=this.$q.defer(),n={method:"DELETE",url:this.API_URL+"/pot/"+e};return this.$http(n).success(function(e){t.resolve(e)}).error(function(e){return t.reject(e)}),t.promise},n.prototype.upload=function(){var e=this.$q.defer();return e.promise},n.prototype.reservePot=function(t){var n=this.$q.defer(),o={method:"POST",url:this.API_URL+"/pot",data:new e.common.Pot({id:t})};return this.$http(o).success(function(e){return n.resolve(e)}).error(function(e){return n.reject(e)}),n.promise},n.prototype.rateReservation=function(t,n){var o=this.$q.defer(),i={method:"POST",url:this.API_URL+"/reservation",data:new e.common.Pot({id:t,rating:n})};return this.$http(i).success(function(e){return o.resolve(e)}).error(function(e){return o.reject(e)}),o.promise},n.prototype.ratePot=function(t,n){var o=this.$q.defer(),i={method:"POST",url:this.API_URL+"/reservation",data:new e.common.Pot({id:t,rating:n})};return this.$http(i).success(function(e){return o.resolve(e)}).error(function(e){return o.reject(e)}),o.promise},n.prototype.deleteReservation=function(t){var n=this.$q.defer(),o={method:"DELETE",url:this.API_URL+"/reservation",data:new e.common.Pot({id:t})};return this.$http(o).success(function(e){return n.resolve(e)}).error(function(e){return n.reject(e)}),n.promise},n}();angular.module("op.common").service("APIService",n)}(t=e.common||(e.common={}))}(op||(op={}));var op;!function(e){var t;!function(e){var t=function(){function e(e,t,n){var o=this,i={method:"GET",url:n+"/s3policy"};t(i).success(function(e){o.policy=e.policy,o.signature=e.signature,o.key=e.key,o.url=e.url,o.cdn=e.cdn}),this.acl="public-read"}return e.$inject=["$log","$http","API_URL"],e.$inject=["$log","$http","API_URL"],e}();e.S3=t,angular.module("op.common").service("S3",t)}(t=e.common||(e.common={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";function e(e){e.decorator("$exceptionHandler",["$delegate","$injector",function(e,t){return function(n,o){e(n,o);var i=t.get("$mdToast");i.show(i.simple().content(n.message).position("bottom right").hideDelay(3e3))}}])}e.$inject=["$provide"],angular.module("op.common").config(e)}(t=e.common||(e.common={}))}(op||(op={}));var op;!function(e){var t;!function(e){"use strict";var t=function(){function e(e){this.md5=e}return e.$inject=["md5"],e.$inject=["md5"],e.prototype.gravatar=function(e){return"http://www.gravatar.com/avatar/"+this.md5.createHash(e||"")+"?d=mm&s=200"},e}();e.GravatarService=t,angular.module("op.common").service("GravatarService",t)}(t=e.common||(e.common={}))}(op||(op={}));var op;!function(e){var t;!function(e){var t=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.latitude=e,this.longitude=t}return e}();e.Location=t,angular.module("op.common").constant("Location",t)}(t=e.common||(e.common={}))}(op||(op={}));var op;!function(e){var t;!function(t){"use strict";var n=function(){function n(e,n,o,i,r){var s=this;this.$log=e,this.$q=n,this.localStorageService=o,this.uiGmapGoogleMapApi=i,this.location=new t.Location,this.key="lastLocation",this.deferred=n.defer(),"geolocation"in r.navigator?(this.geolocation=r.navigator.geolocation,this.geolocation.getCurrentPosition(function(e){return s.success(e)},function(){return s.error()})):this.error()}return n.$inject=["$log","$q","localStorageService","uiGmapGoogleMapApi","$window"],n.$inject=["$log","$q","localStorageService","uiGmapGoogleMapApi","$window"],n.prototype.success=function(e){this.location.latitude=e.coords.latitude,this.location.longitude=e.coords.longitude,this.localStorageService.set(this.key,this.location),this.deferred.resolve(this.location)},n.prototype.error=function(){var e="Unable to retrieve the user's location";this.$log.error(e),this.deferred.reject(e)},n.prototype.getLocation=function(){return this.deferred.promise},n.prototype.getLastLocation=function(){return this.localStorageService.get(this.key)},n.prototype.geocode=function(t){var n=this.$q.defer();return this.uiGmapGoogleMapApi.then(function(o){var i=new o.Geocoder;i.geocode({address:t},function(t,i){if(i===o.GeocoderStatus.OK){var r=new e.common.Location(t[0].geometry.location.lat(),t[0].geometry.location.lng());n.resolve(r)}else n.reject()})}),n.promise},n}();angular.module("op.common").service("LocationService",n)}(t=e.common||(e.common={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";function e(e,t,n,o,i,r,s){return{request:function(e){var n=t.get("SessionService"),o=n.tokenObject;return 0===e.url.indexOf(r)&&o&&(e.headers.Authorization="Bearer "+o.token),e},response:function(e){return e},responseError:function(t){switch(t.status){case 400:e.$broadcast(n,t);break;case 401:e.$broadcast(o,t);break;case 403:e.$broadcast(i,t)}return s.reject(t)}}}function t(t,n){n.setPrefix("op"),t.interceptors.push(e)}var n="event:bad-creditentals",o="event:auth-loginRequired",i="event:auth-forbidden";angular.module("op.common").constant("EVENT_BAD_CREDENTIALS",n).constant("EVENT_LOGIN_REQUIRED",o).constant("EVENT_AUTH_FORBIDDEN",i),e.$inject=["$rootScope","$injector","EVENT_BAD_CREDENTIALS","EVENT_LOGIN_REQUIRED","EVENT_AUTH_FORBIDDEN","API_URL","$q"],t.$inject=["$httpProvider","localStorageServiceProvider"],angular.module("op.common").config(t)}(t=e.common||(e.common={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";var e=function(){function e(e,t,n,o,i){this.AUTH_URL=e,this.$window=t,this.$http=n,this.$q=o,this.SessionService=i}return e.$inject=["AUTH_URL","$window","$http","$q","SessionService"],e.$inject=["AUTH_URL","$window","$http","$q","SessionService"],e.prototype.register=function(e){var t=this.$q.defer(),n={method:"POST",url:this.AUTH_URL+"/register",headers:{"Content-Type":"application/json"},data:e};return this.$http(n).success(function(e){t.resolve(e)}).error(function(e){return t.reject(e)}),t.promise},e.prototype.login=function(e,t){var n=this,o=this.$q.defer(),i=this.$window.btoa(e+":"+t),r={method:"POST",url:this.AUTH_URL+"/login",headers:{Authorization:"Basic "+i}};return this.$http(r).success(function(e){var t=e.token;n.SessionService.setUser(e),o.resolve(t)}).error(function(e){return o.reject(e)}),o.promise},e.prototype.logout=function(){this.SessionService.unsetUser()},e}();angular.module("op.common").service("AuthService",e)}(t=e.common||(e.common={}))}(op||(op={}));var op;!function(e){var t;!function(e){var t=function(){function e(e){this.setPot(e)}return e.prototype.setPot=function(e){this.id=e&&e.id,this.cook=e&&e.cook,this.consumer=e&&e.consumer,this.name=e&&e.name,this.description=e&&e.description,this.address=e&&e.address,this.amount=e&&e.amount,this.image=e&&e.image,this.rating=e&&e.rating||1},e}();e.Pot=t,angular.module("op.common").constant("Pot",t)}(t=e.common||(e.common={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";var e=function(){function e(e,t,n,o,i,r,s){var a=this;this.$rootScope=e,this.$state=t,this.$q=n,this.localStorageService=o,this.APIService=i,this.user=r,this.EVENT_LOGIN_REQUIRED=s,this.key="user",this.tokenObject=o.get(this.key),this.tokenObject&&this.tokenObject.token&&(this.tokenObject.user?r.setUser(this.tokenObject.user):i.getUserData(this.tokenObject.token).then(function(e){r.setUser(e)})),e.$on(s,function(){return a.unsetUser()})}return e.$inject=["$rootScope","$state","$q","localStorageService","APIService","user","EVENT_LOGIN_REQUIRED"],e.$inject=["$rootScope","$state","$q","localStorageService","APIService","user","EVENT_LOGIN_REQUIRED"],e.prototype.setUser=function(e){this.tokenObject=e,this.localStorageService.set(this.key,e),this.user.setUser(e.user)},e.prototype.getUser=function(){var e=this.$q.defer();return e.resolve(this.user),e.promise},e.prototype.unsetUser=function(){this.localStorageService.remove(this.key),this.user.unsetUser(),this.$state.transitionTo("home")},e.prototype.loggedIn=function(){return!!this.user.email},e}();angular.module("op.common").service("SessionService",e)}(t=e.common||(e.common={}))}(op||(op={}));var __extends=this.__extends||function(e,t){function n(){this.constructor=e}for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);n.prototype=t.prototype,e.prototype=new n},op;!function(e){var t;!function(e){"use strict";var t=function(){function e(e,t){this.user=e,this.token=t}return e}();e.Token=t;var n=function(){function e(e){this.setUser(e)}return e.prototype.setUser=function(e){this.id=e&&e.id||"",this.email=e&&e.email||"",this.firstName=e&&e.firstName||"",this.lastName=e&&e.lastName||"",this.description=e&&e.description||"",this.phone=e&&e.phone||"",this.stars=e&&e.stars||0,this.following=e&&e.stars||[]},e.prototype.unsetUser=function(){this.id=this.email=this.firstName=this.lastName=this.description=this.phone=this.image="",this.stars=1,this.following=[]},e}();e.User=n;var o=function(e){function t(){e.apply(this,arguments)}return __extends(t,e),t}(n);e.RegisterUser=o,angular.module("op.common").constant("Token",t).constant("User",n)}(t=e.common||(e.common={}))}(op||(op={}));var op;!function(e){var t;!function(e){"use strict";function t(){return n||(n=new e.User),n}var n;angular.module("op.common").constant("user",t())}(t=e.common||(e.common={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";var e=function(){function e(){this.restrict="E",this.scope={pot:"="},this.controller="PotController",this.controllerAs="pot",this.bindToController=!0,this.templateUrl="pot-bg.tpl.html",this.transclude=!1}return e.instance=function(){return new e},e}();angular.module("op.pots").directive("opPotBg",e.instance)}(t=e.pots||(e.pots={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";var e=function(){function e(){this.restrict="E",this.scope={pot:"="},this.controller="PotController",this.controllerAs="pot",this.bindToController=!0,this.templateUrl="pot-sm.tpl.html",this.transclude=!1}return e.instance=function(){return new e},e}();angular.module("op.pots").directive("opPotSm",e.instance)}(t=e.pots||(e.pots={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";var e=function(){function e(e,t,n,o){var i=this;this.GravatarService=t,this.APIService=n,this.S3=o,this.showDescription=!1,this.APIService.getUserData(this.pot.cook).then(function(e){e.image=i.GravatarService.gravatar(e.email),i.user=e})}return e.$inject=["$log","GravatarService","APIService","S3"],e.$inject=["$log","GravatarService","APIService","S3"],e}();angular.module("op.pots").controller("PotController",e)}(t=e.pots||(e.pots={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";var t=function(){function t(e,t,n,o,i,r,s,a,c,l){var u=this;this.$log=e,this.$state=t,this.$mdDialog=i,this.APIService=s,this.GravatarService=c,this.S3=l,this.name="User Controller",this.querySearchItems=[];var p=o.id;r.getUser().then(function(e){u.myUser=""===p||e.id===p,u.myUser?(r.getUser().then(function(e){u.getUserData(e)}),r.loggedIn()||t.transitionTo("home")):s.getUserData(p).then(function(e){u.getUserData(e)},function(){return u.$state.transitionTo("home")})})}return t.$inject=["$log","$state","$scope","$stateParams","$mdDialog","SessionService","APIService","LoginDialogService","GravatarService","S3"],t.$inject=["$log","$state","$scope","$stateParams","$mdDialog","SessionService","APIService","LoginDialogService","GravatarService","S3"],t.prototype.getPots=function(){var e=this;this.APIService.getUserPots(this.data.id).then(function(t){e.pots=t})},t.prototype.getReservations=function(){var e=this;this.APIService.getUserReservations(this.data.id).then(function(t){e.reservations=t})},t.prototype.goToNewpot=function(){this.$state.transitionTo("user.newpot")},t.prototype.goToList=function(){this.$state.transitionTo("user.list"),this.getPots()},t.prototype.newPot=function(){var t=this,n=new e.common.Pot({name:this.newName,description:this.newDescription,address:this.newAddress,amount:this.newAmount,image:this.newImage[0]});this.APIService.createPot(n).then(function(){t.$state.transitionTo("user.list"),t.getPots(),t.newName="",t.newDescription="",t.newAddress="",t.newImage=null},function(){t.$mdDialog.show(t.$mdDialog.alert().title("Hiba").content("Hibás vagy hiányzó adatok. Próbáld újra!").ok("Rendben"))})},t.prototype.deletePot=function(e,t){var n=this;this.$mdDialog.show(this.$mdDialog.confirm().title("Törlés").content("Biztosan törölni szeretné?").ok("Igen").cancel("Mégse").targetEvent(t)).then(function(){n.APIService.deletePot(e).then(function(){for(var t=0;t<n.pots.length;t++)n.pots[t].id===e&&n.pots.splice(t,1)},function(e){n.$log.debug(e)})})},t.prototype.fileDropped=function(e,t,n){this.$log.debug(e),this.$log.debug(n)},t.prototype.getUserData=function(e){this.data=e,this.data.image=this.GravatarService.gravatar(this.data.email),this.getPots(),this.getReservations()},t.prototype.deleteReservation=function(e,t){var n=this;this.$mdDialog.show(this.$mdDialog.confirm().title("Törlés").content("Biztosan törölni szeretné?").ok("Igen").cancel("Mégse").targetEvent(t)).then(function(){n.APIService.deleteReservation(e).then(function(){for(var t=0;t<n.reservations.length;t++)n.reservations[t].id===e&&n.reservations.splice(t,1)},function(e){n.$log.debug(e)})})},t.prototype.rateReservation=function(e,t){var n=this;t>0&&5>=t&&this.APIService.rateReservation(e,t).then(function(){for(var o=0;o<n.reservations.length;o++)n.reservations[o].id===e&&(n.reservations[o].rating=t)})},t}();angular.module("op.users").controller("UserController",t)}(t=e.users||(e.users={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";function e(e){e.state("user",{url:"/user/:id","abstract":!0,templateUrl:"user.tpl.html",controller:"UserController",controllerAs:"user",resolve:{},data:{onMenu:!1}})}e.$inject=["$stateProvider"],angular.module("op.users").config(e)}(t=e.users||(e.users={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";function e(e){e.state("user.newpot",{templateUrl:"user.newpot.tpl.html",resolve:{},data:{onMenu:!1}})}e.$inject=["$stateProvider"],angular.module("op.users").config(e)}(t=e.users||(e.users={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";function e(e){e.state("user.list",{url:"",templateUrl:"user.list.tpl.html",resolve:{},data:{onMenu:!1}})}e.$inject=["$stateProvider"],angular.module("op.users").config(e)}(t=e.users||(e.users={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";function e(e){e.state("user.reservations",{templateUrl:"user.reservations.tpl.html",data:{onMenu:!1}})}e.$inject=["$stateProvider"],angular.module("op.users").config(e)}(t=e.users||(e.users={}))}(op||(op={}));var op;!function(e){var t;!function(){"use strict";function e(e){e.state("user.pot",{url:"/pot/:id",templateUrl:"user.pot.tpl.html",controller:"PotController",controllerAs:"pot",resolve:{},data:{onMenu:!1}})}e.$inject=["$stateProvider"],angular.module("op.users").config(e)}(t=e.users||(e.users={}))}(op||(op={}));